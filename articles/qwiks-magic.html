<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is Qwik's Resumability Magic? The Pros and Cons</title>
    <link rel="stylesheet" href="../style.css">

    <style>
        .demo-area {
            width: 100%;
            background-color: #2a2a2a;
            padding: 2rem;
            border-radius: 12px;
            margin-block: 2.5rem;
            color: #fff;
            box-sizing: border-box;
        }

        .controls {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            background-color: #1e1e1e;
            padding: 1.5rem;
            border-radius: 8px;
        }

        .master-control button {
            padding: 12px 24px;
            font-size: 1.1em;
            font-weight: bold;
            border-radius: 5px;
            border: none;
            background-color: #007bff;
            color: #fff;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .master-control button:hover {
            background-color: #0056b3;
        }

        .comparison-container {
            display: flex;
            flex-direction: row;
            gap: 1.5rem;
            justify-content: space-between;
            align-items: stretch;
        }

        .demo-box {
            border: 2px solid #555;
            border-radius: 8px;
            padding: 1rem;
            background-color: #1e1e1e;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .demo-box h3 {
            margin-top: 0;
            text-align: center;
            border-bottom: 1px solid #444;
            padding-bottom: 0.75rem;
        }

        .browser-window {
            background: #f0f0f0;
            border-radius: 6px;
            min-height: 180px;
            padding: 1rem;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            flex-grow: 1;
            margin-bottom: 1rem;
        }

        .browser-window h2 {
            font-size: 2.5em;
            margin: 0.5rem;
            color: #1e1e1e;
        }

        .status-label {
            position: absolute;
            top: 8px;
            left: 8px;
            font-size: 0.8em;
            font-weight: bold;
            color: #555;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 2px 5px;
            border-radius: 3px;
        }

        .timeline-wrapper {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 5px;
        }

        .timeline {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0%;
            height: 100%;
        }

        #hydration-timeline-html {
            background-color: #a0c4ff;
        }

        #hydration-timeline-js {
            background-color: #007bff;
        }

        #qwik-timeline {
            background-color: #28a745;
        }

        .interactive-btn {
            padding: 10px 15px;
            font-size: 1.2em;
            width: 50px;
            border: none;
            border-radius: 5px;
            background-color: #999;
            color: #fff;
            cursor: not-allowed;
            transition: background-color 0.3s;
        }

        .interactive-btn.enabled {
            background-color: #28a745;
            cursor: pointer;
        }


        .details-panel {
            background-color: #111;
            border-radius: 6px;
            padding: 0.75rem;
            font-family: monospace;
            font-size: 0.85em;
            margin-top: auto;
            border: 1px solid #444;
        }

        .details-panel h4 {
            margin: 0 0 0.5rem 0;
            color: #bbb;
            border-bottom: 1px solid #333;
            padding-bottom: 0.25rem;
        }

        .details-panel ul {
            list-style: none;
            margin: 0;
            padding: 0;
            height: 100px;
            overflow-y: auto;
        }

        .details-panel li {
            margin-bottom: 0.25rem;
            color: #999;
            animation: fadeIn 0.5s ease;
        }

        .details-panel li.js {
            color: #f0e68c;
        }

        .details-panel li.cpu {
            color: #ff82b2;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(5px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body>

    <header class="header">
        <h1><a href="../index.html">Code Encounters</a></h1>
    </header>

    <main class="container">
        <article class="blog-post">
            <h1>Is Qwik's Resumability Magic? The Pros and Cons</h1>
            <time datetime="2025-11-18">November 18, 2025</time>

            <p>
                Imagine loading a saved video game. The old way, **Hydration**, is like getting a screenshot of the
                level and then having to load the entire game engine from scratch to make it playable. There's an
                annoying delay where you can see the game but can't do anything.
            </p>
            <p>
                **Resumability**, the technology behind the Qwik framework, is like waking your console from rest mode.
                The game is already running, merely paused. You can play instantly. It sounds like the perfect solution
                to web performance, but as with all technology, it comes with its own unique set of trade-offs.
            </p>
            <p>
                This interactive demo will show you exactly how resumability works compared to hydration and explore the
                very real pros and cons of this new approach.
            </p>

            <div class="demo-area">
                <div class="controls">
                    <div class="master-control">
                        <button id="run-demo-btn">â–º Run Comparison</button>
                    </div>
                </div>

                <div class="comparison-container">
                    <div class="demo-box">
                        <h3>Standard Hydration</h3>
                        <div class="browser-window">
                            <div class="status-label" id="hydration-status"></div>
                            <div id="hydration-content" style="display:none;">
                                <h2>0</h2>
                                <button class="interactive-btn" id="hydration-plus-btn">+</button>
                            </div>
                            <div class="timeline-wrapper">
                                <div class="timeline" id="hydration-timeline-html"></div>
                                <div class="timeline" id="hydration-timeline-js"></div>
                            </div>
                        </div>
                        <div class="details-panel">
                            <h4>Behind the Scenes</h4>
                            <ul id="hydration-log"></ul>
                        </div>
                    </div>
                    <div class="demo-box">
                        <h3>Qwik Resumability</h3>
                        <div class="browser-window">
                            <div class="status-label" id="qwik-status"></div>
                            <div id="qwik-content" style="display:none;">
                                <h2>0</h2>
                                <button class="interactive-btn" id="qwik-plus-btn">+</button>
                            </div>
                            <div class="timeline-wrapper">
                                <div class="timeline" id="qwik-timeline"></div>
                            </div>
                        </div>
                        <div class="details-panel">
                            <h4>Behind the Scenes</h4>
                            <ul id="qwik-log"></ul>
                        </div>
                    </div>
                </div>
            </div>

            <h2>The Upside: Why Resumability Feels Instant</h2>
            <p>
                As you can see in the demo, Qwik's time-to-interactive is almost immediate. This is its superpower.
            </p>
            <ul>
                <li><strong>Instant Interactivity:</strong> Qwik avoids the expensive step of executing all the page's
                    JavaScript upfront. The server "pauses" the application's state and the client "resumes" it without
                    re-running any code. Your app is interactive the moment it's visible.</li>
                <li><strong>Scalable Performance:</strong> For a traditional hydrated app, a bigger application means a
                    bigger JavaScript bundle and a longer wait. With Qwik, the initial interactive time is constant,
                    whether your app has 10 components or 10,000.</li>
            </ul>

            <h2>The Downsides: The Price of Magic</h2>
            <p>
                Resumability doesn't eliminate work; it cleverly moves it. This creates a new set of trade-offs that
                developers need to understand.
            </p>
            <ul>
                <li><strong>The Payload Shift:</strong> Notice in the demo's log that Qwik's `index.html` file is
                    larger. To make the app resumable, the server serializes a huge amount of information into the HTML
                    document itself. The cost shifts from a large JS file to a larger initial HTML file.</li>
                <li><strong>Complexity & The Optimizer:</strong> Qwik relies on a complex compiler (the "optimizer") to
                    break the code into tiny, on-demand chunks. This works brilliantly but can feel like a "black box,"
                    and it requires developers to learn a new mental model and follow specific rules (like using a `$`
                    marker).</li>
                <li><strong>Potential Network Waterfalls:</strong> Clicking the Qwik button for the first time triggered
                    a download for `counter.js`. While this is efficient, a complex interaction could trigger a chain of
                    these small downloads, which could add up and make a specific action feel sluggish.</li>
                <li><strong>Ecosystem Maturity:</strong> As a newer framework, the community, tooling, and third-party
                    library support for Qwik are still growing compared to established giants like React.</li>
            </ul>

            <h2>Conclusion</h2>
            <p>
                Resumability is a revolutionary approach that directly solves the web's hydration problem. It offers an
                unparalleled time-to-interactive, especially for large, complex applications. However, it achieves this
                by trading the familiar problem of a large JavaScript bundle for a new set of challenges: a larger HTML
                payload and a dependency on a sophisticated build-time optimizer. It represents a fundamental shift in
                web architecture and a very exciting glimpse into the future of performance.
            </p>
        </article>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Code Encounters. All rights reserved.</p>
        </div>
    </footer>

    <script>
        const runDemoBtn = document.getElementById('run-demo-btn');

        const elements = {
            hydration: {
                status: document.getElementById('hydration-status'),
                content: document.getElementById('hydration-content'),
                counter: document.querySelector('#hydration-content h2'),
                btn: document.getElementById('hydration-plus-btn'),
                timelineHTML: document.getElementById('hydration-timeline-html'),
                timelineJS: document.getElementById('hydration-timeline-js'),
                log: document.getElementById('hydration-log'),
            },
            qwik: {
                status: document.getElementById('qwik-status'),
                content: document.getElementById('qwik-content'),
                counter: document.querySelector('#qwik-content h2'),
                btn: document.getElementById('qwik-plus-btn'),
                timeline: document.getElementById('qwik-timeline'),
                log: document.getElementById('qwik-log'),
            }
        };

        let animationTimers = [];

        function addLog(logEl, text, type = 'info') {
            const li = document.createElement('li');
            li.textContent = text;
            li.className = type;
            logEl.appendChild(li);
        }

        function resetDemos() {
            animationTimers.forEach(timer => clearTimeout(timer));
            animationTimers = [];

            Object.values(elements).forEach(group => {
                group.content.style.display = 'none';
                group.btn.classList.remove('enabled');
                group.counter.textContent = '0';
                group.status.textContent = 'Waiting...';
                group.log.innerHTML = '';

                ['timeline', 'timelineHTML', 'timelineJS'].forEach(tKey => {
                    if (group[tKey]) {
                        group[tKey].style.transition = 'none';
                        group[tKey].style.width = '0%';
                    }
                });

                const oldBtn = group.btn;
                const newBtn = oldBtn.cloneNode(true);
                oldBtn.parentNode.replaceChild(newBtn, oldBtn);
                group.btn = newBtn;
            });
        }

        function runDemos() {
            resetDemos();

            setTimeout(() => {
                const baseNetworkTime = 300;
                const hydrationJsTime = 2000;
                const totalHydrationTime = baseNetworkTime + hydrationJsTime;

                elements.hydration.timelineHTML.style.transition = `width ${baseNetworkTime / 1000}s linear`;
                elements.hydration.timelineJS.style.transition = `width ${hydrationJsTime / 1000}s linear ${baseNetworkTime / 1000}s`;
                elements.hydration.timelineHTML.style.width = '100%';
                elements.hydration.timelineJS.style.width = '0%';
                addLog(elements.hydration.log, 'ðŸ“„ GET index.html (25kb)');

                animationTimers.push(setTimeout(() => {
                    elements.hydration.content.style.display = 'flex';
                    elements.hydration.status.textContent = 'Visible (Hydrating...)';
                    elements.hydration.timelineJS.style.width = '100%';
                    addLog(elements.hydration.log, 'ðŸ“„ GET app.js (500kb)', 'js');
                }, baseNetworkTime));

                animationTimers.push(setTimeout(() => {
                    addLog(elements.hydration.log, 'âš™ï¸ Executing JS (Hydration)', 'cpu');
                }, baseNetworkTime + 400));

                animationTimers.push(setTimeout(() => {
                    elements.hydration.btn.classList.add('enabled');
                    elements.hydration.status.textContent = 'Interactive';
                    let count = 0;
                    elements.hydration.btn.addEventListener('click', () => {
                        count++;
                        elements.hydration.counter.textContent = count;
                    });
                }, totalHydrationTime));

                const qwikHtmlTime = baseNetworkTime + 100; // Slightly longer HTML download
                elements.qwik.timeline.style.transition = `width ${qwikHtmlTime / 1000}s linear`;
                elements.qwik.timeline.style.width = '100%';
                addLog(elements.qwik.log, 'ðŸ“„ GET index.html (65kb)');

                animationTimers.push(setTimeout(() => {
                    elements.qwik.content.style.display = 'flex';
                    elements.qwik.btn.classList.add('enabled');
                    elements.qwik.status.textContent = 'Interactive (Resumed)';

                    let count = 0;
                    let isFirstClick = true;
                    elements.qwik.btn.addEventListener('click', () => {
                        if (isFirstClick) {
                            addLog(elements.qwik.log, 'ðŸ“„ GET counter.js (1kb)', 'js');
                            isFirstClick = false;
                        }
                        count++;
                        elements.qwik.counter.textContent = count;
                    });
                }, qwikHtmlTime));

            }, 50);
        }

        runDemoBtn.addEventListener('click', runDemos);

        resetDemos();
    </script>
</body>

</html>